# 事务
事务是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向操作系统提交或者撤销请求操作，即这些操作要么同时成功，要么同时失败

事务的四大特性
[[四大特性]]

![[Pasted image 20240627105256.png]]

# redo log
重做日志，记录的是事务提交时数据页的物理修改，是用来实现事务的持久性
该日志文件由两部分组成：
* 重做日志缓冲（redo log buffer），在内存中
* 重做日志文件（redo log file），在磁盘中

当事务提交之后会把所有修改信息都存到该日志文件中，用于在刷新脏页到磁盘发生错误时，用于数据恢复使用

![[Pasted image 20240627110014.png]]

* 为什么不在事务提交时直接把脏页刷新到磁盘呢？
因为普通的表的Buffer Pool刷新到磁盘是随机IO，会带来很大的性能影响。但是我们把redo log buffer刷新到redo log file中，由于redo log file是日志文件，我们一般采用追加写，这是一个顺序IO的过程，所以对性能的影响较小

所以有了：
![[Pasted image 20240627110505.png]]

WAL(Write-Ahead Logging)
先写入日志，再写入文件

# undo log