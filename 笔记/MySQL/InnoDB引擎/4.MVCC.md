多版本并发控制
# 基本概念
## 当前读
读取的是记录的最新版本，读取时还要保证其他记录不能修改当前记录，会对读取的记录进行加锁。对于我们日常的操作，如`select...lock in share mode（共享锁）`,`select... for update`,`update`,`insert`,`delete（排他锁）`都是一种当前读

也就是保证我们读取的数据是最新的，所以共享锁和排他锁就是符合我们要求的，因为这两种锁都保证了这一点

当处于RR的隔离级别时，使用符合当前读的语句比如`select...lock in share mode`会让我们在一个事务中读取到另一个事务已经修改但是还没有提交的数据，这也是保证读取的是记录的最新版本的这一要求的

## 快照读
简单的select不加锁就是快照读，快照读，读取的是记录数据的可见版本，有可能是历史数据，不加速，是非阻塞的
* Read Commit：每次select都会生成一个快照读
* RR：开启事务后的第一个select语句才是快照读
* Serializable：快照读会退化为当前读