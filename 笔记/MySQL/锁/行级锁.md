前置[[表级锁]]
# 介绍
行级锁，每次操作锁住对应的数据行，锁的粒度最小，发生冲突的概率最低，并发度最高，应用在InnoDB存储引擎当中

InnoDB的数据是基于索引组织的，行锁是对索引上的索引项加锁来实现的，而不是对记录进行加锁

行级锁分为三类：
* 行锁（记录锁）：锁定单个行记录的锁，防止其他事务对此进行update和delete，RC和RR隔离级别下都支持
* 间隙锁：锁定索引记录间隙（B+树的双向链表之间的间隙），确保索引记录间隙不变，防止其他事务在这个间隙进行insert，出现幻读，在RR隔离级别下支持
* 零键锁：行锁和间隙锁组合，会锁住记录和间隙，在RR隔离级别下支持

# 行锁
 在InnoDB中提供了两种锁
 * 共享锁：允许一个事务去读取一行，阻止其他事务获得相同数据集的排他锁
 * 排他锁：允许获取排他锁的事务更新数据，其他与其他事务均互斥

`insert`、`update`、`delete`会自动加上排他锁
`select`(正常)不会加锁
`select ... lock in share mode`会主动加上共享锁
`select ... for update`会加上排他锁

