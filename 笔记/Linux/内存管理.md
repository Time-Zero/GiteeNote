# 内存申请
## 32位操作系统
在32位操作系统中，最大可以寻址的内存空间为$2^{32}$ ，也就是4GB。但是内核态虚拟内存空间为1GB，所以实际可以申请的内存为3GB。
![[Pasted image 20240721150545.png]]
虽然理论是可以申请到3GB，但是实际<span style="color:rgb(255, 0, 0)">可以使用的肯定不到3GB</span> 

## 64位操作系统
在64位操作系统中，可以寻址的最大内存空间为$2^{64}$，也就是128TB。但是物理内存往往没有这么大，但是Linux中存在Swap交换空间，可以将<span style="color:rgb(255, 0, 0)">内存中不常用的空间换出到Swap空间中</span>（使用LRU算法），这样的话往往可以使用的最大内存比物理内存要大。

因为涉及到了Swap空间，所以实际可以使用的内存也要考虑到Swap空间的影响。因为Swap空间存在于磁盘上，所以我们的Swap空间的大小不可以超过磁盘的大小。

由于以上的原理，所以在64位操作系统中，我们申请的内存基本都是虚拟内存，也就是申请后操作系统不会立即为你准备这一块内存，而是当你的程序访问到这块内存空间时，再动态的分配这块内存。

同时如果物理内存加上Swap分区的大小还是不够程序使用，就会触发Linux的OOM机制，将系统中占用<span style="color:rgb(255, 0, 0)">内存最大的进程杀掉</span> 